{
  "name": "graph",
  "version": "0.2",
  "coreVersion": "0.2",
  "messages": [
    {
      "messageName": "createEntity",
      "description": "Request to create an entity",
      "source": "block",
      "respondedToBy": "createEntityResponse",
      "sentOnInitialization": false,
      "data": {
        "type": "object",
        "properties": {
          "entityTypeId": {
            "description": "The entityTypeId of the type of the entity to create",
            "$ref": "https://blockprotocol.org/types/modules/graph/0.3/schema/versioned-url"
          },
          "properties": {
            "description": "The properties of the entity to create",
            "$ref": "https://blockprotocol.org/types/modules/graph/0.3/schema/property-type-object"
          },
          "linkData": {
            "description": "Link data if the entity is a link entity",
            "$ref": "https://blockprotocol.org/types/modules/graph/0.3/schema/link-data"
          }
        },
        "required": [
          "entityTypeId",
          "properties"
        ]
      },
      "errorCodes": ["NOT_IMPLEMENTED"]
    },
    {
      "messageName": "createEntityResponse",
      "description": "The response to a request to create an entity",
      "source": "embedder",
      "respondedToBy": null,
      "sentOnInitialization": false,
      "data": {
        "$ref": "https://blockprotocol.org/types/modules/graph/0.3/schema/entity"
      },
      "errorCodes": ["FORBIDDEN", "INVALID_INPUT", "NOT_IMPLEMENTED"]
    },
    {
      "messageName": "updateEntity",
      "description": "Request to update an entity, with the properties to update",
      "source": "block",
      "respondedToBy": "updateEntityResponse",
      "sentOnInitialization": false,
      "data": {
        "type": "object",
        "allOf": [
          {
            "properties": {
              "entityId": {
                "description": "The entityId of the entity to update",
                "$ref": "https://blockprotocol.org/types/modules/graph/0.3/schema/entity-id"
              },
              "entityTypeId": {
                "description": "The entityTypeId of the updated entity",
                "$ref": "https://blockprotocol.org/types/modules/graph/0.3/schema/versioned-url"
              },
              "properties": {
                "description": "The new properties object to assign to the entity",
                "$ref": "https://blockprotocol.org/types/modules/graph/0.3/schema/property-type-object"
              }
            }
          },
          {
            "$ref": "https://blockprotocol.org/types/modules/graph/0.3/schema/link-orders"
          }
        ],
        "required": [
          "entityId",
          "entityTypeId",
          "properties"
        ]
      },
      "errorCodes": ["NOT_IMPLEMENTED"]
    },
    {
      "messageName": "updateEntityResponse",
      "description": "The response to a request to update an entity",
      "source": "embedder",
      "respondedToBy": null,
      "sentOnInitialization": false,
      "data": {
        "$ref": "https://blockprotocol.org/types/modules/graph/0.3/schema/entity"
      },
      "errorCodes": ["FORBIDDEN", "INVALID_INPUT", "NOT_FOUND", "NOT_IMPLEMENTED"]
    },
    {
      "messageName": "deleteEntity",
      "description": "Request to delete an entity, expecting 'true' in response if the operation succeeds.",
      "source": "block",
      "respondedToBy": "deleteEntityResponse",
      "sentOnInitialization": false,
      "data": {
        "description": "The entityId of the entity to delete",
        "$ref": "https://blockprotocol.org/types/modules/graph/0.3/schema/entity-id"
      },
      "errorCodes": ["NOT_IMPLEMENTED"]
    },
    {
      "messageName": "deleteEntityResponse",
      "description": "The response to a request to delete an entity",
      "source": "embedder",
      "respondedToBy": null,
      "sentOnInitialization": false,
      "data": {
        "description": "'true' if the operation succeeded. Otherwise, errors should be returned.",
        "type": "boolean",
        "const": true
      },
      "errorCodes": ["FORBIDDEN", "INVALID_INPUT", "NOT_FOUND", "NOT_IMPLEMENTED"]
    },
    {
      "messageName": "getEntity",
      "description": "Request to retrieve an entity, expecting the entity in response.",
      "source": "block",
      "respondedToBy": "getEntityResponse",
      "sentOnInitialization": false,
      "data": {
        "type": "object",
        "properties": {
          "entityId": {
            "description": "The entityId of the entity to retrieve",
            "$ref": "https://blockprotocol.org/types/modules/graph/0.3/schema/entity-id"
          },
          "graphResolveDepths": {
            "$ref": "https://blockprotocol.org/types/modules/graph/0.3/schema/partial-graph-resolve-depths"
          }
        },
        "required": ["entityId"]
      },
      "errorCodes": ["NOT_IMPLEMENTED"]
    },
    {
      "messageName": "getEntityResponse",
      "description": "The response to a request to get an entity",
      "source": "embedder",
      "respondedToBy": null,
      "sentOnInitialization": false,
      "data": {
        "$ref": "https://blockprotocol.org/types/modules/graph/0.3/schema/subgraph"
      },
      "errorCodes": ["FORBIDDEN", "INVALID_INPUT", "NOT_FOUND", "NOT_IMPLEMENTED"]
    },
    {
      "messageName": "aggregateEntities",
      "description": "Request to retrieve an aggregation of entities.",
      "source": "block",
      "respondedToBy": "aggregateEntitiesResponse",
      "sentOnInitialization": false,
      "data": {
        "description": "The results of an entity aggregation, and the operation that was used to produce it.",
        "type": "object",
        "properties": {
          "operation": {
            "$ref": "https://blockprotocol.org/types/modules/graph/0.3/schema/aggregation-operation"
          },
          "graphResolveDepths": {
            "$ref": "https://blockprotocol.org/types/modules/graph/0.3/schema/partial-graph-resolve-depths"
          }
        },
        "required": [
          "operation"
        ]
      },
      "errorCodes": ["NOT_IMPLEMENTED"]
    },
    {
      "messageName": "aggregateEntitiesResponse",
      "description": "The response to a request to retrieve an aggregation of entities",
      "source": "embedder",
      "respondedToBy": null,
      "sentOnInitialization": false,
      "data": {
        "description": "The aggregation operation to apply",
        "type": "object",
        "properties": {
          "results": {
            "$ref": "https://blockprotocol.org/types/modules/graph/0.3/schema/subgraph"
          },
          "operation": {
            "$ref": "https://blockprotocol.org/types/modules/graph/0.3/schema/aggregation-operation"
          }
        },
        "required": [
          "results",
          "operation"
        ]
      },
      "errorCodes": ["FORBIDDEN", "INVALID_INPUT", "NOT_IMPLEMENTED"]
    },
    {
      "messageName": "uploadFile",
      "description": "Request to upload a file and create an entity to store metadata about it.",
      "source": "block",
      "respondedToBy": "uploadFileResponse",
      "sentOnInitialization": false,
      "data": {
        "type": "object",
        "properties": {
          "description": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "url": {
            "type": "string",
            "format": "uri"
          }
        },
        "required": [
          "url"
        ]
      },
      "errorCodes": ["NOT_IMPLEMENTED"]
    },
    {
      "messageName": "uploadFileResponse",
      "description": "The response to a request to create an entity storing metadata about an uploaded file.",
      "source": "embedder",
      "respondedToBy": null,
      "sentOnInitialization": false,
      "data": {
        "$ref": "https://blockprotocol.org/@blockprotocol/types/entity-type/file/v/1"
      },
      "errorCodes": ["FORBIDDEN", "INVALID_INPUT", "NOT_FOUND", "NOT_IMPLEMENTED"]
    }
  ]
}
